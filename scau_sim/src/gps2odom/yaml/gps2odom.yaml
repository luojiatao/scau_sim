# Navsat (将GPS坐标转换为笛卡尔坐标)
navsat:
  frequency: 80
  wait_for_datum: false   # 如果设置为 true，则 navsat 模块会等待接收到初始位置信息（datum）后再开始处理数据。
  delay: 0.0
  magnetic_declination_radians: 0
  yaw_offset: 0
  zero_altitude: true
  broadcast_utm_transform: false    #是否广播从UTM（通用横轴墨卡托）坐标系到map坐标系的转换
  broadcast_utm_transform_as_parent_frame: false
  publish_filtered_gps: false

# EKF for IMU
# 下一次试验如果得不到odom0再试试改这下面的odom
ekf_imu:
  publish_tf: true
  map_frame: map
  odom_frame: odom
  base_link_frame: base_link
  world_frame: odom

  frequency: 80
  two_d_mode: true
  sensor_timeout: 0.01

# ekf_gps_imu:
#   # Basic frame parameters
#   map_frame: map
#   odom_frame: odom
#   base_link_frame: base_link
#   world_frame: odom

#   # Sensor configuration
#   imu0: /imu/data
#   imu0_config: [false, false, false, false, false, true, false, false, false, false, false, true, true, false, false]
#   odom0: /Odometry/gps  # Assuming this is the output of navsat_transform_node
#   odom0_config: [true, true, false, false, false, false, false, false, false, false, false, false, false, false, false]

#   # Frequency and other parameters
#   frequency: 50
#   two_d_mode: true
#   sensor_timeout: 0.1
  # Include other necessary parameters as in your existing configuration


  # -------------------------------------
  # External IMU:
  # -------------------------------------
  imu0: /imu/data
  # make sure the input is aligned with ROS REP105. "imu_correct" is manually transformed by myself. EKF can also transform the data using tf between your imu and base_link
  imu0_config:        #值的顺序是x，y，z，滚动，俯仰，偏航，vx，vy，vz，vroll，vpitch，vyaw，ax，ay，az
    [
      false, false, false,
      false, false, true,
      false, false, false,
      false, false, true,
      true, false, false,
    ]
  imu0_differential: false
  imu0_queue_size: 50
  imu0_remove_gravitational_acceleration: true
  # -------------------------------------
  # Odometry (From Navsat):
  # -------------------------------------
  odom0: odometry/gps
  odom0_config:
    [
      true, true, false,
      false, false, false,
      false, false, false,
      false, false, false,
      false, false, false,
    ]
  odom0_differential: false
  odom0_queue_size: 10

  #                            x     y     z     r     p     y   x_dot  y_dot  z_dot  r_dot p_dot y_dot x_ddot y_ddot z_ddot
  process_noise_covariance:
    [
      1.0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1.0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      10.0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.03,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.03,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.25,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.25,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.04,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.01,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.01,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.5,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.01,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.01,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0.015,
    ]
